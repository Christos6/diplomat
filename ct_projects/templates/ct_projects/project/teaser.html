{% load url from future %}
{% load staticfiles %}

<article class="project public-project {% if not two_columns %}col-lg-4{% endif %} col-md-6 col-xs-12 block-line-half">
	<div class="background">
        {% if project.logo %}
            <a href="{{ project.get_absolute_url }}">
                <div class="background-image" style="background-image: url({{ project.logo }});">
                    <img class="square svg" src="{% static "img/icon-folders-8d39bbb3.svg" %}">
                </div>
            </a>
        {% endif %}

		<header>
            <a href="{{ project.get_absolute_url }}">
			    <h3 class="header-medium secondary">{{ project.title }}</h3>
            </a>

			<div class="tooltip-container">
				<a href="#nowhere" class="open-tooltip-button"><img class="more-options svg" src="{% static "img/icon-more-options-fbdbd735.svg" %}"></a>
				<div class="custom-tooltip">
					<ul>
						<li>
							<a href="{% url 'project-details' project.pk %}">More about this</a>
						</li>
						<li><a href="#nowhere">Follow project</a></li>
					</ul>
				</div>
			</div>
		</header>

        {% with idea_count=project.ideas.count campaign_count=project.campaigns.all.count followed_count=project.followed.all.count %}
            <div class="content">
                <table>
                    <tr class="row">
                        <td class="col-xs-5">
                            <img class="icon menu-icon svg" src="{% static "img/icon-followers-654741d3.svg" %}">
                            <p>Followers</p>
                        </td>
                        <td class="col-xs-7">
                            <p class="bold">{{ followed_count }}</p>
                        </td>
                    </tr>

                    <tr class="row">
                        <td class="col-xs-5">
                            <img class="icon menu-icon svg" src="{% static "img/icon-campaigns-96784c9b.svg" %}">
                            <p>Running campaigns</p>
                        </td>
                        <td class="col-xs-7">
                            <p class="bold">{{ campaign_count }}</p>
                        </td>
                    </tr>

                    <tr class="row">
                        <td class="col-xs-5">
                            <img class="icon menu-icon svg" src="{% static "img/icon-rewards-f6d4d815.svg" %}">
                            <p>Rewards</p>
                        </td>
                        <td class="col-xs-7">
                            <p class="bold">{% if project.has_rewards %}Yes{% else %}No{% endif %}</p>
                        </td>
                    </tr>
                </table>
            </div>

            <div class="content last">
                <table>
                    <tr class="row">
                        <td class="col-xs-5">
                            <img class="icon menu-icon svg" src="{% static "img/icon-pending-accepted-a9421b1c.svg" %}">
                            <p>Invites</p>
                        </td>
                        <td class="col-xs-7">
                            <p class="bold">-</p>
                        </td>
                    </tr>

                    <tr class="row">
                        <td class="col-xs-5">
                            <img class="icon menu-icon svg" src="{% static "img/icon-campaign-participated-79a84226.svg" %}">
                            <p class="completed-campaigns">Completed campaigns</p>
                        </td>
                        <td class="col-xs-7">
                            <p class="bold">-</p>
                        </td>
                    </tr>
                </table>
            </div>
        {% endwith %}

		<footer>
			<a href="{% url 'project-details' project.pk %}" class="btn">Show project</a>
		</footer>
	</div>
</article>

